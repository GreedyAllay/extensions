<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Archivo:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<style>
    body {
        background-color: black;
        color: white;
        font-family: Archivo;
    }
    button {
        background-color: rgb(73, 73, 73);
        color: white;
        margin: 5px;
        border-style: none;
        border-radius: 5px;
        padding: 10px;
    }
    button:hover {
        cursor: pointer;
    }
    #content {
        display: flex;
        flex-direction: column;
        margin: auto;
        width: 50%;
    }
</style>

<body>
    <select name="s" id="model" style="margin-left: 80%;">
    <option value="gemma3">Gemma 3</option>
    <option value="llama3.2">Llama 3.2</option>
    <option value="deepseek-r1">DeepSeek r1</option>
    <option value="artifish/llama3.2-uncensored">Llama 3.2 uncensored</option>
</select>
    <div id="content">
    <div style="display: flex;">
<textarea name="" id="prompt">hello</textarea>
<button onclick="sendRequest(`${prompt.value} (${information})`)">Send</button>
</div>
<p id="response"></p>
</div>


<script>
    const information = "please keep your response short. You cannot use formatting."
    const URL = "http://localhost:11434/api/generate"
    const prompt = document.getElementById("prompt")
    const responsetxt = document.getElementById("response")
    const model = document.getElementById("model")

    async function sendRequest(prompt) {
    responsetxt.textContent = "Thinking..."
    responsetxt.style.color = "green"
    const request = fetch(URL, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        model: model.value,
        prompt: prompt,
        stream: false,
    }),
})
.then(async (response) => {
    if(!response.ok) {
        throw new Error("err " + response.state)
    }
    console.log("Actually got something back!")
    const responsejson = await response.json()
    gotSomething(responsejson)
    return responsejson;
})
.then((data) => {
    console.log(data)
})
.catch((error) => {
    console.error(error)
    throw error;
})
}

function gotSomething(response) {
    console.log(response.response)
    responsetxt.textContent = response.response
    responsetxt.style.color = "white"
}

// sendRequest('send 5 words')

function addToList(text) {
    responsetxt.textContent = responsetxt.textContent + "\n" + text
}
</script>
</body>